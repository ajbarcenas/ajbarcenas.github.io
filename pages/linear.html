<!DOCTYPE html>
<html>
  <head>
  <title>Tensorflow Demo 2</title>
      <link rel="stylesheet" href="../mystyle.css">
      <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js">
      </script>
      <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis"></script>
      <!--[if IE]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js">
</script>
    <![endif]-->
  </head>
  <body>
      <header>
          <h2>TensorFlow Linear Regression</h2>
      </header>
      <hr>

      <script type="text/javascript">
        async function plot(pointsArray, featureName) {
            tfvis.render.scatterplot (
            {name: `${featureName} vs House Price`},
            {values: [pointsArray], series: ["original"]},
            {
                xLabel: featureName,
                yLabel: "Price",
            }
            )
        }


        async function run () {
        const houseData = tf.data.csv("https://alexisisbarcenas.com/capImgs/kc_house_data.csv");
        const sampleDataset = houseData.take(10);
        const dataArray = await sampleDataset.toArray();
        console.log(dataArray);

        const points = houseData.map(record => ({
            x: record.sqft_living,
            y: record.price,
        }));
        plot(await points.toArray(), "Square feet");

        // Features inputs
        const featureValues = await points.map(p => p.x).toArray();
        const featureTensor = tf.tensor2d(featureValues, [featureValues.length, 1]);


        //Labels outputs
        const labelValues = await points.map(p => p.y).toArray();
        const labelTensor = tf.tensor2d(labelValues, [labelValues.length, 1]);
        featureTensor.print();
        labelTensor.print();
        }

        run();
      </script>

  </body>
</html>
